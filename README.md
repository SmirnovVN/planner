# planner
Целью данной работы является изучение основных методов автоматизированного планирования на примере задачи оптимального распределения лифтов. Для решения реализовано два алгоритма A* и Direct.

Пусть имеется N этажей здания, на каждом из которых находится pi, i є 1..N человек, которым необходимо воспользоваться лифтом. Будем считать, что у каждого человека есть точка назначения dstnj и точка отправки depj, а также длина требуемого переезда lj = |dstnj – depj|. Для достижения своей цели каждый человек может воспользоваться одним из E лифтов. При этом на лифте может ехать одновременно несколько человек, их количество ограничивается вместительностью лифта сk, k є 1..E. За каждый переезд между этажами вводится стоимость переезда m, а за каждую остановку лифта вводится стоимость остановки s. 
Требуется найти план такой, что:
•	все люди достигли своей точки назначения;
•	стоимость плана минимальна.

В процессе работы алгоритма для вершин рассчитывается функция f(x) = g(x) + h(x), где
•	g(x) — стоимость пути из стартовой вершины,
•	h(x) — эвристическая функция стоимости пути от x до конечной цели.
Фактически, функция f(x) — длина пути до цели, которая складывается из пройденного расстояния g(x) и оставшегося расстояния h(x). Исходя из этого, чем меньше значение f(x), тем раньше мы откроем вершину x, так как через неё мы предположительно достигнем расстояние до цели быстрее всего. Открытые алгоритмом вершины можно хранить в очереди с приоритетом по значению f(x).
Стоимость пройденного пути будет рассчитываться, как сумма стоимостей всех переездов и остановок.
g = m*T + s*S, где T – количество этажей, которое проехали все лифты, S – количество остановок, совершенных всеми лифтами.
Эвристическая функция будет рассчитываться таким образом, будто все лифты ездят максимально заполненными. Если лифт вмещает ck человека, то будем считать, что за один рейс в одном направлении он перевезет минимум ck человека. При этом, в идеальном случае лифт остановится всего один раз.
hl = m*max(lj) + s
После увеличения значения эвристической функции извлечем из множества людей ck человек, затем снова увеличим эвристическое приближение в цикле, пока еще есть люди.
Поскольку в стоимость пути входят и те переезды, когда лифты едут пустыми, также будем увеличивать эвристическую функцию
he = m*min(tp), где tp – разница между номером этажа, на котором находится лифт, и этажом, где находится пассажир, для которого max(lj), p є 1..E
Т. к. возможна переоценка эвристической функцией, в случае, когда во время одного рейса пассажир вышел, а вместо него вошел другой (таким образом за рейс перевезено больше людей, чем вмещает лифт), будем считать, что для в рамках рейса человек с максимальной длиной переезда lm занимает одно место в лифте, а остальные люди только часть, равную lj/lm.
Также, если из-за таких пассажиров рейс продлиться дольше, чем учитывается в оценке, увеличим эвристическую функцию на необходимое значение.
ha = m*l + s, где l – длина пути, на которую увеличится рейс 
Таким образом, эвристическая функция вычисляется, как сумма вышеперечисленных оценок.
h = Σhl + Σhe + Σha

